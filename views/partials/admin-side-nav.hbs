<aside
    class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-l my-3 fixed-start ms-3 d-flex flex-column justify-content-between"
    id="sidenav-main">
    <div>
        <div class="sidenav-header">
            <img src="../../public/img/newcrabs-logo.png" class="navbar-brand-img h-50" alt="main_logo" />
        </div>

        <div class="collapse navbar-collapse w-auto h-auto" id="sidenav-collapse-main">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link {{dashboard_active}}" href="/dashboard">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            {{#ifEquals dashboard_active "active"}}
                            <img src="../../public/img/admin-nav/dashboard-active.svg">
                            {{/ifEquals}}
                            {{#ifEquals dashboard_active null}}
                            <img src="../../public/img/admin-nav/dashboard-deactive.svg">
                            {{/ifEquals}}
                        </div>
                        <span class="nav-link-text ms-1">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {{driver_active}}" href="/drivers">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            {{#ifEquals driver_active "active"}}
                            <img src="../../public/img/admin-nav/driver-active.svg">
                            {{/ifEquals}}
                            {{#ifEquals driver_active null}}
                            <img src="../../public/img/admin-nav/driver-deactive.svg">
                            {{/ifEquals}}
                        </div>
                        <span class="nav-link-text ms-1">Driver</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {{centerofficer_active}}" href="/center-officers">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            {{#ifEquals centerofficer_active "active"}}
                            <img src="../../public/img/admin-nav/center-officer-active.svg">
                            {{/ifEquals}}
                            {{#ifEquals centerofficer_active null}}
                            <img src="../../public/img/admin-nav/center-officer-deactive.svg">
                            {{/ifEquals}}
                        </div>
                        <span class="nav-link-text ms-1">Centre Officer</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {{voucher_active}}" href="/vouchers">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            {{#ifEquals voucher_active "active"}}
                            <img src="../../public/img/admin-nav/voucher-active.svg">
                            {{/ifEquals}}
                            {{#ifEquals voucher_active null}}
                            <img src="../../public/img/admin-nav/voucher-deactive.svg">
                            {{/ifEquals}}
                        </div>
                        <span class="nav-link-text ms-1">Voucher</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {{farerate_active}}" href="/fare-rate">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            {{#ifEquals farerate_active "active"}}
                            <img src="../../public/img/admin-nav/fare-rate-active.svg">
                            {{/ifEquals}}
                            {{#ifEquals farerate_active null}}
                            <img src="../../public/img/admin-nav/fare-rate-deactive.svg">
                            {{/ifEquals}}
                        </div>
                        <span class="nav-link-text ms-1">Fare Rate</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="mx-3">
        <button id="logoutBtn" class="btn bg-primary w-100 text-white">Log out</button>
    </div>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        document.getElementById('logoutBtn').addEventListener('click', async event => {
            event.preventDefault();
            const res = await fetch('http://127.0.0.1:3000/api/account/signout', {
                method: "GET",
                credentials: 'include'
            })
            if (res.ok) {
                const data = await res.json();
                console.log(data)
                if (data.code == 100) {
                    window.location.href = 'http://127.0.0.1:4000/'
                } else {
                    swal({
                        title: "Opps",
                        text: data.message,
                        icon: 'error',
                        timer: 2000,  // Set the timer in milliseconds (2000ms = 2s)
                        timerProgressBar: true,  // Optional: show a timer progress bar
                            onBeforeOpen: () => {
                            Swal.showLoading();
                        },
                        onClose: () => {
                            // Do something when the alert closes
                            console.log('Alert closed');
                        }
                    })
                } 
            } else {
                swal({
                        title: "Opps",
                        text: data.message,
                        icon: 'error',
                        timer: 2000,  // Set the timer in milliseconds (2000ms = 2s)
                        timerProgressBar: true,  // Optional: show a timer progress bar
                            onBeforeOpen: () => {
                            Swal.showLoading();
                        },
                        onClose: () => {
                            // Do something when the alert closes
                            console.log('Alert closed');
                        }
                    })
            }
        })
    </script>
</aside>